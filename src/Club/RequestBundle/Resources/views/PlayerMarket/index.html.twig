{% extends "ClubRequestBundle::base.html.twig" %}

{% block body %}

{% if is_granted('IS_AUTHENTICATED_FULLY') %}
<p class="box">
  <a href="{{ path('club_request_playermarket_new') }}" class="btn-info"><span>{% trans %}Create request{% endtrans %}</span></a>
</p>
{% endif %}

<h2>Players market</h2>

<table class="style">
  <thead>
    <tr class="bg">
      <th>Time</th>
      <th>User</th>
      <th>Comments</th>
      <th>Action</th>
    </tr>
  <thead>
  <tfoot>
    <tr class="bg">
      <td colspan="4">&#160;</td>
    </tr>
  </tfoot>
  <tbody>
  {% for item in market %}
    <tr>
      <td>{{ item.playtime|club_datetime }}</td>
      <td>{{ item.user.name }}</td>
      <td>{{ item.requestComments|length }}</td>
      <td>
      {% include "ClubLayoutBundle:Default:comment_link.html.twig" with {'url':path('club_request_comment_index', { 'id':item.id })} %}
      {% if item.user == app.user %}
        {% include "ClubLayoutBundle:Default:edit_link.html.twig" with {'url':path('club_request_playermarket_edit', { 'id':item.id })} %}
        {% include "ClubLayoutBundle:Default:delete_link.html.twig" with {'url':path('club_request_playermarket_delete', { 'id':item.id })} %}
      {% endif %}
      </td>
    </tr>
  {% else %}
    <tr>
      <td colspan="4">There are not items in the players market.</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}
